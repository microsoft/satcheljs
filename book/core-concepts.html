
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Core Concepts Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="middleware.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="core-concepts.html">
            
                <a href="core-concepts.html">
            
                    
                    Core Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="middleware.html">
            
                <a href="middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="api/action.html">
            
                <a href="api/action.html">
            
                    
                    action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="api/actionCreator.html">
            
                <a href="api/actionCreator.html">
            
                    
                    actionCreator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="api/applyMiddleware.html">
            
                <a href="api/applyMiddleware.html">
            
                    
                    applyMiddleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="api/createStore.html">
            
                <a href="api/createStore.html">
            
                    
                    createStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="api/dispatch.html">
            
                <a href="api/dispatch.html">
            
                    
                    dispatch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="api/getRootStore.html">
            
                <a href="api/getRootStore.html">
            
                    
                    getRootStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="api/mutator.html">
            
                <a href="api/mutator.html">
            
                    
                    mutator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="api/mutatorAction.html">
            
                <a href="api/mutatorAction.html">
            
                    
                    mutatorAction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="api/orchestrator.html">
            
                <a href="api/orchestrator.html">
            
                    
                    orchestrator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="api/orchestratorAction.html">
            
                <a href="api/orchestratorAction.html">
            
                    
                    orchestratorAction
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Best Practices
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="best-practices/action-creators.html">
            
                <a href="best-practices/action-creators.html">
            
                    
                    Action Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="best-practices/mutators-and-orchestrators.html">
            
                <a href="best-practices/mutators-and-orchestrators.html">
            
                    
                    Mutators and Orchestrators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="best-practices/selectors.html">
            
                <a href="best-practices/selectors.html">
            
                    
                    Selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="best-practices/mobx.html">
            
                <a href="best-practices/mobx.html">
            
                    
                    MobX
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Core Concepts</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="core-concepts">Core Concepts</h1><p>Satchel is an opinionated implementation of Flux.
For an introduction to Flux as a pattern and the reasoning behind it, you can see <a href="https://facebook.github.io/flux/docs/overview.html" target="_blank">Facebook&apos;s overview</a>.
Satchel&apos;s version of Flux is a little bit different, but it&apos;s still focused on making a large application performant and easy to comprehend, develop, and test.</p><h2 id="unidirectional-data-flow">Unidirectional Data Flow</h2><p>One of the key tenants of Flux is that data only flows in one direction.
Satchel&apos;s data flow looks like this:</p><p><img alt="Satchel&apos;s unidirectional dataflow" src="dataflow.png"></p><p>Application state lives in the store.
When data in the store is changed, the view is rerendered to reflect it.
The view creates and dispatches actions.
Mutators subscribe to actions and modify the store in response to them.</p><p>You&apos;ll notice there is another entity that can respond to actions: orchestrators.
Orchestrators are Satchel&apos;s mechanism for dealing with side effects.
For instance, an orchestrator might make a service call and dispatch more actions once it returns.</p><p>Let&apos;s look at each of these entities in more detail.</p><h2 id="store">Store</h2><p>The Satchel store contains the entirety of the application state.
The store is just data; unlike some implementations of Flux it doesn&apos;t contain business logic.
The app state can be segmented into multiple stores (from multiple calls to <code>createStore</code>), but internally they are rooted into a single state object.</p><p><img alt="Satchel&apos;s state tree" src="state-tree.png"></p><p>The root store (and therefore the entire store underneath it) is a MobX observable&#x2014;this is what allows views to update automatically when the store changes.
For the most part you can interact with the store just like any other javascript object, but it is worth <a href="https://mobxjs.github.io/mobx/index.html" target="_blank">understanding how MobX works</a> in order to take advantage of all it has to offer (and to be aware of some pitfalls).</p><p>It is recommended that the state be a strict tree of simple JavaScript types (objects, arrays, maps, and primitives).
This makes it easy to serialize and restore the store, which is necessary for an isomorphic web app and makes possible other dev tooling.</p><h2 id="views">Views</h2><p>The view is the UI layer of an application.
While Satchel could work with any view technology, it was built with React in mind.
The view layer consists of React components tagged with MobX&apos;s <code>@observer</code> decorator.
By making a component an observer it will automatically detect changes in the data it depends on and update itself.</p><p>In a Satchel app components are only responsible for rendering the UI.
They should not contain any state (that belongs in the store) and they should not contain business logic (that belongs in mutators and orchestrators).
Most or all views should be able to be written as <a href="https://facebook.github.io/react/docs/reusable-components.html#stateless-functions" target="_blank">stateless functional components</a>.
Given the state of the store and the props provided to it, a component should always render the same way.</p><h2 id="action-creators">Action Creators</h2><p>Action creators construct action messages to be dispatched.
Typically actions are dispatched in response to some user-initiated event in the UI, but they may also be executed by external entities such as server notifications or timer callbacks.</p><p>In Satchel, action creators are simple object factories&#x2014;they should contain no side effects or business logic.
They are also consumed by mutators and orchestrators in order to subscribe to the associated action.
(When writing an application in TypeScript, this allows action messages to be strongly-typed end-to-end.)</p><h2 id="dispatcher">Dispatcher</h2><p>The dispatcher is effectively just an event aggregator.
Handlers (mutators and orchestrators) get subscribed to the dispatcher and are called back when the appropriate actions are dispatched.
The dispatcher also provides <a href="middleware.html">middleware</a> an opportunity to process each dispatched action.</p><p>The entire dispatch process is wrapped in a <a href="https://mobxjs.github.io/mobx/refguide/transaction.html" target="_blank">MobX transaction</a> which means any UI updates are deferred until all state changes are complete.</p><h2 id="mutators">Mutators</h2><p>Mutators are solely responsible for modifying the store.
(Typically they reside alongside the store that they apply to.)
A mutator should have relatively little logic, just what is necessary to update the store based on a dispatched action.
Mutators should not dispatch other actions or have any other side effects.
It is possible for multiple mutators to subscribe to the same action&#x2014;in fact, this is advisable when an action needs to affect disparate parts of the application.</p><h2 id="orchestrators">Orchestrators</h2><p>Orchestrators are responsible for dealing with side effects and any other coordination the app may require.
Side effects might include service calls, setting timers, dealing with browser local storage, etc.
Orchestrators cannot modify the store directly, but they can dispatch further actions which, indirectly, will cause the store to get modified.</p><p>In a large app with many stores, orchestrators provide a way to coordinate between the different stores.
For example, in response to an action an orchestrator might dispatch a series of additional actions in a specific order, or it might read data from one store and conditionally dispatch actions to affect another store.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="middleware.html" class="navigation navigation-next " aria-label="Next page: Middleware">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Core Concepts","level":"1.2","depth":1,"next":{"title":"Middleware","level":"1.3","depth":1,"path":"middleware.md","ref":"middleware.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"core-concepts.md","mtime":"2017-09-13T18:26:09.261Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2017-09-13T18:29:15.814Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

